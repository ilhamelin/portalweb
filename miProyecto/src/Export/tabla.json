// util.js

import React, { useState, useEffect } from "react";

const Funciones = () => {
  const defaultProfileImage = "url_to_default_image";
  const [profileImage, setProfileImage] = useState(() => {
    const savedImage = localStorage.getItem("profileImage");
    return savedImage || defaultProfileImage;
  });
  const [headerProfileImage, setHeaderProfileImage] = useState(profileImage);

  const handleImageChange = (event) => {
    const file = event.target.files[0];

    if (file) {
      const reader = new FileReader();

      reader.onloadend = () => {
        setProfileImage(reader.result);
        setHeaderProfileImage(reader.result);
      };

      if (file.type.startsWith("image")) {
        reader.readAsDataURL(file);
      } else {
        setProfileImage(URL.createObjectURL(file));
        setHeaderProfileImage(URL.createObjectURL(file));
      }
    }
  };

  const [selectedCountry, setSelectedCountry] = useState("");
  const [cities, setCities] = useState([]);

  const [companyName, setCompanyName] = useState("");
  const [contactNumber, setContactNumber] = useState("");
  const [website, setWebsite] = useState("");

  useEffect(() => {
    const cityList = {
      argentina: ["Buenos Aires", "CÃ³rdoba", "Rosario", "Mendoza"],
      // ... (rest of the city list)
    };

    setCities(cityList[selectedCountry] || []);
  }, [selectedCountry]);

  const options = [
    // ... (your options array)
  ];

  const handleDiscard = () => {
    localStorage.removeItem("formData");
    setProfileImage(defaultProfileImage);
    setSelectedCountry("");
    setCities([]);
    setCompanyName("");
    setContactNumber("");
    setWebsite("");
  };

  const handleSave = () => {
    const formData = {
      profileImage,
      selectedCountry,
      cities,
      companyName,
      contactNumber,
      website,
    };

    setProfileImage(profileImage);
    localStorage.setItem("formData", JSON.stringify(formData));
    alert("Datos guardados localmente");
  };

  useEffect(() => {
    const savedFormData = localStorage.getItem("formData");
    if (savedFormData) {
      const parsedFormData = JSON.parse(savedFormData);
      setProfileImage(parsedFormData.profileImage);
      setSelectedCountry(parsedFormData.selectedCountry);
      setCities(parsedFormData.cities);
      setCompanyName(parsedFormData.companyName);
      setContactNumber(parsedFormData.contactNumber);
      setWebsite(parsedFormData.website);
    }
  }, []);

  return <div>{/* Your component JSX */}</div>;
};

export default Funciones;
